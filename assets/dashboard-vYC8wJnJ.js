import{r as n,u as b,j as e,l as j,k as t,m as d,a as g,c as u}from"./index-BTgyP7uX.js";import{B as m,I as w,A as v,L as k}from"./types-BatVEiCz.js";import{s as H}from"./signincalls-CboYOSYJ.js";import{u as V}from"./useGetData-D4GpdJh3.js";const S="data:image/svg+xml,%3csvg%20width='16'%20height='18'%20viewBox='0%200%2016%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.30775%2017.5C2.81058%2017.5%202.385%2017.323%202.031%2016.969C1.677%2016.615%201.5%2016.1894%201.5%2015.6922V2.99998H1.25C1.0375%202.99998%200.859417%202.92806%200.71575%202.78423C0.571917%202.6404%200.5%202.46223%200.5%202.24973C0.5%202.03706%200.571917%201.85898%200.71575%201.71548C0.859417%201.57181%201.0375%201.49998%201.25%201.49998H5C5%201.25515%205.08625%201.04648%205.25875%200.873979C5.43108%200.701646%205.63967%200.615479%205.8845%200.615479H10.1155C10.3603%200.615479%2010.5689%200.701646%2010.7413%200.873979C10.9138%201.04648%2011%201.25515%2011%201.49998H14.75C14.9625%201.49998%2015.1406%201.5719%2015.2843%201.71573C15.4281%201.85956%2015.5%202.03773%2015.5%202.25023C15.5%202.4629%2015.4281%202.64098%2015.2843%202.78448C15.1406%202.92815%2014.9625%202.99998%2014.75%202.99998H14.5V15.6922C14.5%2016.1894%2014.323%2016.615%2013.969%2016.969C13.615%2017.323%2013.1894%2017.5%2012.6923%2017.5H3.30775ZM13%202.99998H3V15.6922C3%2015.7821%203.02883%2015.8558%203.0865%2015.9135C3.14417%2015.9711%203.21792%2016%203.30775%2016H12.6923C12.7821%2016%2012.8558%2015.9711%2012.9135%2015.9135C12.9712%2015.8558%2013%2015.7821%2013%2015.6922V2.99998ZM6.15425%2014C6.36675%2014%206.54483%2013.9281%206.6885%2013.7845C6.832%2013.6406%206.90375%2013.4625%206.90375%2013.25V5.74998C6.90375%205.53748%206.83183%205.35931%206.688%205.21548C6.54433%205.07181%206.36617%204.99998%206.1535%204.99998C5.941%204.99998%205.76292%205.07181%205.61925%205.21548C5.47575%205.35931%205.404%205.53748%205.404%205.74998V13.25C5.404%2013.4625%205.47583%2013.6406%205.6195%2013.7845C5.76333%2013.9281%205.94158%2014%206.15425%2014ZM9.8465%2014C10.059%2014%2010.2371%2013.9281%2010.3807%2013.7845C10.5243%2013.6406%2010.596%2013.4625%2010.596%2013.25V5.74998C10.596%205.53748%2010.5242%205.35931%2010.3805%205.21548C10.2367%205.07181%2010.0584%204.99998%209.84575%204.99998C9.63325%204.99998%209.45517%205.07181%209.3115%205.21548C9.168%205.35931%209.09625%205.53748%209.09625%205.74998V13.25C9.09625%2013.4625%209.16817%2013.6406%209.312%2013.7845C9.45567%2013.9281%209.63383%2014%209.8465%2014Z'%20fill='%23050400'/%3e%3c/svg%3e";function Z(){const[x,r]=n.useState([]),[c,p]=n.useState(""),y=b(),i=JSON.parse(localStorage.getItem("user")||"{}"),{loading:C,error:h,data:l}=V("/notes");n.useEffect(()=>{l&&r(l)},[l]);const N=async()=>{if(!c.trim()){t.error("Note cannot be empty");return}const{data:s}=await g.post("/create-note",{detail:c,userId:i.id},u()),a=s.note;r(o=>[a,...o]),t.success("Note created successfully")},f=s=>{g.delete(`/delete-note/${s}`,u()).then(()=>{r(a=>a.filter(o=>o.id!==s)),t.success("Note deleted successfully")}).catch(a=>{console.error(a),t.error("Failed to delete note")})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-primary dark:text-gray-100",children:[e.jsx("header",{className:"sticky top-0 z-10 border-b border-gray-200 bg-white/80 backdrop-blur-sm dark:border-gray-800 dark:bg-gray-800/80",children:e.jsxs("div",{className:"mx-auto flex max-w-4xl items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("img",{src:j,alt:"logo",className:"h-8 w-8"}),e.jsx("h1",{className:"text-md font-medium",children:"Dashboard"})]}),e.jsx(m,{variant:"ghost",className:"text-accent hover:bg-accent/20 dark:hover:bg-secondary/20 underline",onClick:()=>{t.success("Signed out successfully"),H(),y("/signin")},children:"Sign Out"})]})}),e.jsxs("main",{className:"mx-auto space-y-6 max-w-4xl p-4",children:[e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 rounded-lg bg-white md:p-6 p-4 shadow-custom dark:shadow-custom-dark dark:bg-gray-800",children:[e.jsxs("h2",{className:"mb-2 text-lg font-bold",children:["Welcome, ",i.name,"!"]}),e.jsxs("p",{className:"mb-4 text-sm dark:text-gray-400",children:["Email: ",i.email]}),e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:e.jsx(w,{value:c,label:"Write a new note...",onChange:s=>p(s.target.value),className:"flex-1"})})]}),e.jsx(m,{onClick:N,className:"whitespace-nowrap w-full space-y-4 text-sm font-semibold h-12 px-8",children:"Create Note"}),e.jsxs("section",{children:[e.jsx("h3",{className:"mb-2 text-md font-medium",children:"Notes"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx(v,{children:x.map((s,a)=>e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"rounded-lg bg-white md:p-4 md:pl-6 shadow-custom dark:shadow-custom-dark dark:bg-gray-800 pl-4 py-1",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1 flex items-center",children:e.jsx("p",{className:"text-sm dark:text-gray-200",children:s.detail})}),e.jsx(m,{variant:"ghost",onClick:()=>f(s.id),className:"hover:bg-red-100 flex justify-end dark:hover:bg-red-900/20 dark:text-secondary !h-12",children:e.jsx("img",{src:S,alt:"delete",className:"h-4 w-4"})})]})},a))}),x.length===0&&(C?e.jsx(k,{className:"mr-2 h-4 w-4 animate-spin"}):h?e.jsx("p",{className:"text-red-500",children:h}):e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},className:"rounded-lg bg-white p-8 text-center dark:bg-gray-800",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notes yet. Create your first note above!"})}))]})]})]})]})}export{Z as default};
